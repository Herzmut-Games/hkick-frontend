var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function c(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e,t,n){e.$$.on_destroy.push(function(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}(t,n))}function i(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode.removeChild(e)}function a(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function d(){return f(" ")}function $(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function p(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}let h;function _(e){h=e}function g(e){(function(){if(!h)throw new Error("Function called outside component initialization");return h})().$$.on_mount.push(e)}const m=[],b=[],v=[],y=[],w=Promise.resolve();let x=!1;function S(e){v.push(e)}function k(e){y.push(e)}function z(){const e=new Set;do{for(;m.length;){const e=m.shift();_(e),N(e.$$)}for(;b.length;)b.pop()();for(let t=0;t<v.length;t+=1){const n=v[t];e.has(n)||(n(),e.add(n))}v.length=0}while(m.length);for(;y.length;)y.pop()();x=!1}function N(e){e.fragment&&(e.update(e.dirty),o(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(S))}const C=new Set;let O;function E(e,t){e&&e.i&&(C.delete(e),e.i(t))}function J(e,t,n,o){if(e&&e.o){if(C.has(e))return;C.add(e),O.c.push(()=>{C.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}function A(e,t,n){-1!==e.$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t]))}function L(e,n,s){const{fragment:r,on_mount:i,on_destroy:u,after_update:l}=e.$$;r.m(n,s),S(()=>{const n=i.map(t).filter(c);u?u.push(...n):o(n),e.$$.on_mount=[]}),l.forEach(S)}function T(e,t){e.$$.fragment&&(o(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function j(e,t){e.$$.dirty||(m.push(e),x||(x=!0,w.then(z)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function G(t,c,s,r,i,u){const l=h;_(t);const a=c.props||{},f=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:n(),dirty:null};let d=!1;var $;f.ctx=s?s(t,a,(e,n,o=n)=>(f.ctx&&i(f.ctx[e],f.ctx[e]=o)&&(f.bound[e]&&f.bound[e](o),d&&j(t,e)),n)):a,f.update(),d=!0,o(f.before_update),f.fragment=r(f.ctx),c.target&&(c.hydrate?f.fragment.l(($=c.target,Array.from($.childNodes))):f.fragment.c(),c.intro&&E(t.$$.fragment),L(t,c.target,c.anchor),z()),_(l)}class M{$destroy(){T(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const R=[];function q(t,n=e){let o;const c=[];function r(e){if(s(t,e)&&(t=e,o)){const e=!R.length;for(let e=0;e<c.length;e+=1){const n=c[e];n[1](),R.push(n,t)}if(e){for(let e=0;e<R.length;e+=2)R[e][0](R[e+1]);R.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(s,i=e){const u=[s,i];return c.push(u),1===c.length&&(o=n(r)||e),s(t),()=>{const e=c.indexOf(u);-1!==e&&c.splice(e,1),0===c.length&&(o(),o=null)}}}}const B=q(0),F=q(0);function H(t){var n,c,s,r,h,_,g;return{c(){(n=a("button")).textContent="+",c=d(),s=a("span"),r=f(t.score),h=d(),(_=a("button")).textContent="-",p(n,"class","button"),p(s,"class","score__value svelte-1ytc6h"),p(_,"class","button"),g=[$(n,"click",t.increase),$(_,"click",t.decrease)]},m(e,t){u(e,n,t),u(e,c,t),u(e,s,t),i(s,r),u(e,h,t),u(e,_,t)},p(e,t){var n,o;e.score&&(n=r,o=""+(o=t.score),n.data!==o&&(n.data=o))},i:e,o:e,d(e){e&&(l(n),l(c),l(s),l(h),l(_)),o(g)}}}function P(e,t,n){let{score:o}=t;return e.$set=(e=>{"score"in e&&n("score",o=e.score)}),{score:o,increase:function(){n("score",o+=1)},decrease:function(){o>0&&n("score",o-=1)}}}class W extends M{constructor(e){super(),G(this,e,P,H,s,["score"])}}function D(e){var t,n,o,c,s,r,f,h,_,g,m,v,y,w;function x(t){e.score0_score_binding.call(null,t),c=!0,k(()=>c=!1)}let S={};void 0!==e.$score_red&&(S.score=e.$score_red);var z=new W({props:S});function N(t){e.score1_score_binding.call(null,t),_=!0,k(()=>_=!1)}b.push(()=>A(z,"score",x));let C={};void 0!==e.$score_white&&(C.score=e.$score_white);var O=new W({props:C});return b.push(()=>A(O,"score",N)),{c(){t=a("div"),n=a("div"),o=a("div"),z.$$.fragment.c(),s=d(),(r=a("div")).innerHTML='<span class="score__divider svelte-l42iz0">:</span>',f=d(),h=a("div"),O.$$.fragment.c(),g=d(),m=a("div"),(v=a("button")).textContent="Reset",p(o,"class","score__col svelte-l42iz0"),p(r,"class","score__col svelte-l42iz0"),p(h,"class","score__col svelte-l42iz0"),p(n,"class","score__row svelte-l42iz0"),p(v,"class","button score__reset svelte-l42iz0"),p(m,"class","score__row svelte-l42iz0"),p(t,"class","score svelte-l42iz0"),w=$(v,"click",I)},m(e,c){u(e,t,c),i(t,n),i(n,o),L(z,o,null),i(n,s),i(n,r),i(n,f),i(n,h),L(O,h,null),i(t,g),i(t,m),i(m,v),y=!0},p(e,t){var n={};!c&&e.$score_red&&(n.score=t.$score_red),z.$set(n);var o={};!_&&e.$score_white&&(o.score=t.$score_white),O.$set(o)},i(e){y||(E(z.$$.fragment,e),E(O.$$.fragment,e),y=!0)},o(e){J(z.$$.fragment,e),J(O.$$.fragment,e),y=!1},d(e){e&&l(t),T(z),T(O),w()}}}function I(){B.set(0),F.set(0)}function K(e,t,n){let o,c;return r(e,B,e=>{n("$score_red",o=e)}),r(e,F,e=>{n("$score_white",c=e)}),{$score_red:o,$score_white:c,score0_score_binding:function(e){o=e,B.set(o)},score1_score_binding:function(e){c=e,F.set(c)}}}class Q extends M{constructor(e){super(),G(this,e,K,D,s,[])}}const U="GoalNotificationsChannel",V="127.0.0.1",X={command:"subscribe",identifier:JSON.stringify({channel:U})};function Y(t){var n,o=new Q({});return{c(){o.$$.fragment.c()},m(e,t){L(o,e,t),n=!0},p:e,i(e){n||(E(o.$$.fragment,e),n=!0)},o(e){J(o.$$.fragment,e),n=!1},d(e){T(o,e)}}}function Z(e){return g(async()=>{!function e(){let t=new WebSocket(`ws://${V}:3000/cable`);t.onopen=(e=>{console.log("[open] Connection established"),console.log("Subscribing to channel:",U),t.send(JSON.stringify(X))}),t.onmessage=(e=>{const t=JSON.parse(e.data);let n,o;if(t.identifier&&(n=JSON.parse(t.identifier).channel),t.type&&(o=t.type),n)switch(n){case"GoalNotificationsChannel":if("confirm_subscription"===o&&console.log("Successfully subscribed to channel:",n),t.message)switch(console.log(t.message.team),t.message.team){case"red":$score_red+=1;break;case"white":$score_white+=1}}}),t.onclose=(t=>{console.log("Socket is closed. Reconnect will be attempted in 1 second.",t.reason),setTimeout(()=>{e()},1e3)}),t.onerror=function(e){console.log(`[error] ${e.message}`)}}()}),{}}return new class extends M{constructor(e){super(),G(this,e,Z,Y,s,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
