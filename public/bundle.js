var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function c(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t,n){e.$$.on_destroy.push(function(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}(t,n))}function i(e,t,n=t){return e.set(n),t}function u(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function f(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function $(){return d(" ")}function p(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function h(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}let _;function g(e){_=e}function m(e){(function(){if(!_)throw new Error("Function called outside component initialization");return _})().$$.on_mount.push(e)}const b=[],v=[],y=[],w=[],x=Promise.resolve();let S=!1;function k(e){y.push(e)}function z(e){w.push(e)}function N(){const e=new Set;do{for(;b.length;){const e=b.shift();g(e),C(e.$$)}for(;v.length;)v.pop()();for(let t=0;t<y.length;t+=1){const n=y[t];e.has(n)||(n(),e.add(n))}y.length=0}while(b.length);for(;w.length;)w.pop()();S=!1}function C(e){e.fragment&&(e.update(e.dirty),o(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(k))}const O=new Set;let E;function J(e,t){e&&e.i&&(O.delete(e),e.i(t))}function A(e,t,n,o){if(e&&e.o){if(O.has(e))return;O.add(e),E.c.push(()=>{O.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}function L(e,t,n){-1!==e.$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t]))}function T(e,n,r){const{fragment:s,on_mount:i,on_destroy:u,after_update:l}=e.$$;s.m(n,r),k(()=>{const n=i.map(t).filter(c);u?u.push(...n):o(n),e.$$.on_mount=[]}),l.forEach(k)}function j(e,t){e.$$.fragment&&(o(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function G(e,t){e.$$.dirty||(b.push(e),S||(S=!0,x.then(N)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function M(t,c,r,s,i,u){const l=_;g(t);const a=c.props||{},f=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:n(),dirty:null};let d=!1;var $;f.ctx=r?r(t,a,(e,n,o=n)=>(f.ctx&&i(f.ctx[e],f.ctx[e]=o)&&(f.bound[e]&&f.bound[e](o),d&&G(t,e)),n)):a,f.update(),d=!0,o(f.before_update),f.fragment=s(f.ctx),c.target&&(c.hydrate?f.fragment.l(($=c.target,Array.from($.childNodes))):f.fragment.c(),c.intro&&J(t.$$.fragment),T(t,c.target,c.anchor),N()),g(l)}class R{$destroy(){j(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const q=[];function B(t,n=e){let o;const c=[];function s(e){if(r(t,e)&&(t=e,o)){const e=!q.length;for(let e=0;e<c.length;e+=1){const n=c[e];n[1](),q.push(n,t)}if(e){for(let e=0;e<q.length;e+=2)q[e][0](q[e+1]);q.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(r,i=e){const u=[r,i];return c.push(u),1===c.length&&(o=n(s)||e),r(t),()=>{const e=c.indexOf(u);-1!==e&&c.splice(e,1),0===c.length&&(o(),o=null)}}}}const F=B(0),H=B(0);function P(t){var n,c,r,s,i,_,g;return{c(){(n=f("button")).textContent="+",c=$(),r=f("span"),s=d(t.score),i=$(),(_=f("button")).textContent="-",h(n,"class","button"),h(r,"class","score__value svelte-1ytc6h"),h(_,"class","button"),g=[p(n,"click",t.increase),p(_,"click",t.decrease)]},m(e,t){l(e,n,t),l(e,c,t),l(e,r,t),u(r,s),l(e,i,t),l(e,_,t)},p(e,t){var n,o;e.score&&(n=s,o=""+(o=t.score),n.data!==o&&(n.data=o))},i:e,o:e,d(e){e&&(a(n),a(c),a(r),a(i),a(_)),o(g)}}}function W(e,t,n){let{score:o}=t;return e.$set=(e=>{"score"in e&&n("score",o=e.score)}),{score:o,increase:function(){n("score",o+=1)},decrease:function(){o>0&&n("score",o-=1)}}}class D extends R{constructor(e){super(),M(this,e,W,P,r,["score"])}}const I="GoalNotificationsChannel",K="127.0.0.1",Q={command:"subscribe",identifier:JSON.stringify({channel:I})};function U(e){var t,n,o,c,r,s,i,d,_,g,m,b,y,w;function x(t){e.score0_score_binding.call(null,t),c=!0,z(()=>c=!1)}let S={};void 0!==e.$score_red&&(S.score=e.$score_red);var k=new D({props:S});function N(t){e.score1_score_binding.call(null,t),_=!0,z(()=>_=!1)}v.push(()=>L(k,"score",x));let C={};void 0!==e.$score_white&&(C.score=e.$score_white);var O=new D({props:C});return v.push(()=>L(O,"score",N)),{c(){t=f("div"),n=f("div"),o=f("div"),k.$$.fragment.c(),r=$(),(s=f("div")).innerHTML='<span class="score__divider svelte-l42iz0">:</span>',i=$(),d=f("div"),O.$$.fragment.c(),g=$(),m=f("div"),(b=f("button")).textContent="Reset",h(o,"class","score__col svelte-l42iz0"),h(s,"class","score__col svelte-l42iz0"),h(d,"class","score__col svelte-l42iz0"),h(n,"class","score__row svelte-l42iz0"),h(b,"class","button score__reset svelte-l42iz0"),h(m,"class","score__row svelte-l42iz0"),h(t,"class","score svelte-l42iz0"),w=p(b,"click",V)},m(e,c){l(e,t,c),u(t,n),u(n,o),T(k,o,null),u(n,r),u(n,s),u(n,i),u(n,d),T(O,d,null),u(t,g),u(t,m),u(m,b),y=!0},p(e,t){var n={};!c&&e.$score_red&&(n.score=t.$score_red),k.$set(n);var o={};!_&&e.$score_white&&(o.score=t.$score_white),O.$set(o)},i(e){y||(J(k.$$.fragment,e),J(O.$$.fragment,e),y=!0)},o(e){A(k.$$.fragment,e),A(O.$$.fragment,e),y=!1},d(e){e&&a(t),j(k),j(O),w()}}}function V(){F.set(0),H.set(0)}function X(e,t,n){let o,c;return s(e,F,e=>{n("$score_red",o=e)}),s(e,H,e=>{n("$score_white",c=e)}),m(async()=>{(function e(){let t=new WebSocket(`ws://${K}:3000/cable`);return t.onopen=(e=>{console.log("[open] Connection established"),console.log("Subscribing to channel:",I),t.send(JSON.stringify(Q))}),t.onclose=(t=>{console.log("Socket is closed. Reconnect will be attempted in 1 second.",t.reason),setTimeout(()=>{e()},1e3)}),t.onerror=function(e){console.error(`[error] ${e.message}`)},t}()).onmessage=(e=>{const t=JSON.parse(e.data);let n,r;if(t.identifier&&(n=JSON.parse(t.identifier).channel),t.type&&(r=t.type),n)switch(n){case"GoalNotificationsChannel":if("confirm_subscription"===r&&console.log("Successfully subscribed to channel:",n),t.message)switch(t.message.team){case"red":i(F,o+=1);break;case"white":i(H,c+=1)}}})}),{$score_red:o,$score_white:c,score0_score_binding:function(e){o=e,F.set(o)},score1_score_binding:function(e){c=e,H.set(c)}}}class Y extends R{constructor(e){super(),M(this,e,X,U,r,[])}}function Z(t){var n,o=new Y({});return{c(){o.$$.fragment.c()},m(e,t){T(o,e,t),n=!0},p:e,i(e){n||(J(o.$$.fragment,e),n=!0)},o(e){A(o.$$.fragment,e),n=!1},d(e){j(o,e)}}}return new class extends R{constructor(e){super(),M(this,e,null,Z,r,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
